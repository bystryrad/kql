{
  "version": "Notebook/1.0",
  "items": [
    {
      "type": 9,
      "content": {
        "version": "KqlParameterItem/1.0",
        "parameters": [
          {
            "id": "974dfe0b-ff98-473c-ac6a-eb1b605a4ad2",
            "version": "KqlParameterItem/1.0",
            "name": "Subskripce",
            "type": 6,
            "description": "Filtr pro výběr subskripce",
            "isRequired": true,
            "multiSelect": true,
            "quote": "'",
            "delimiter": ",",
            "typeSettings": {
              "additionalResourceOptions": [
                "value::all"
              ],
              "includeAll": true
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "value": [
              "value::all"
            ]
          },
          {
            "id": "2b84192a-fed7-4f86-a1e4-b38621013f4d",
            "version": "KqlParameterItem/1.0",
            "name": "CasoveRozmezi",
            "label": "Časové období",
            "type": 4,
            "description": "Parametr pro výběr časového období",
            "isRequired": true,
            "typeSettings": {
              "selectableValues": [
                {
                  "durationMs": 300000
                },
                {
                  "durationMs": 900000
                },
                {
                  "durationMs": 1800000
                },
                {
                  "durationMs": 3600000
                },
                {
                  "durationMs": 14400000
                },
                {
                  "durationMs": 43200000
                },
                {
                  "durationMs": 86400000
                },
                {
                  "durationMs": 172800000
                },
                {
                  "durationMs": 604800000
                },
                {
                  "durationMs": 2592000000
                },
                {
                  "durationMs": 5184000000
                },
                {
                  "durationMs": 7776000000
                }
              ]
            },
            "timeContext": {
              "durationMs": 86400000
            },
            "value": {
              "durationMs": 86400000
            }
          }
        ],
        "style": "pills",
        "queryType": 0,
        "resourceType": "microsoft.operationalinsights/workspaces"
      },
      "name": "Parametry"
    },
    {
      "type": 11,
      "content": {
        "version": "LinkItem/1.0",
        "style": "tabs",
        "tabStyle": "bigger",
        "links": [
          {
            "id": "730c67a5-6f5c-45c5-9c9c-9b9101cae8d9",
            "cellValue": "tab",
            "linkTarget": "parameter",
            "linkLabel": "Web Apps",
            "subTarget": "webapps",
            "style": "link"
          },
          {
            "id": "08cbdb0e-4dae-44d2-9c67-69ae09186c55",
            "cellValue": "tab",
            "linkTarget": "parameter",
            "linkLabel": "Databáze",
            "subTarget": "databaze",
            "style": "link"
          }
        ]
      },
      "name": "Záložky"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "# Web Apps"
            },
            "name": "text - 0"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type == \"microsoft.web/serverfarms\"\r\n| project aspJoinId = toupper(id), tier = sku.tier, size = sku.size\r\n| join kind=leftouter (\r\n    resources         \r\n    | where type == \"microsoft.web/sites\" or type == \"microsoft.web/sites/slots\"\r\n    | extend aspJoinId = toupper(properties.serverFarmId), isRunning = iif(properties.state == \"Running\", 1, 0)\r\n    | summarize appCount=count(), runningCount=sum(isRunning), app_ids = make_set(id) by aspJoinId\r\n) on aspJoinId\r\n| extend maxAppRecommendation = \r\n    case(\r\n        size == 'F1', 9999,\r\n        size == 'Y1', 9999,\r\n\r\n        size == 'B1', 8,\r\n        size == 'B2', 16,\r\n        size == 'B3', 32,\r\n\r\n        size == 'S1', 8,\r\n        size == 'S2', 16,\r\n        size == 'S3', 32,\r\n\r\n        size == 'P1v2', 8,\r\n        size == 'P2v2', 16,\r\n        size == 'P3v2', 32,\r\n        0\r\n    )\r\n\r\n| extend sizeRam = \r\n    case(\r\n        size == 'F1', todouble(1),\r\n        size == 'Y1', todouble(1),\r\n\r\n        size == 'B1', todouble(1.75),\r\n        size == 'B2', todouble(3.50),\r\n        size == 'B3', todouble(7),\r\n\r\n        size == 'S1', todouble(1.75),\r\n        size == 'S2', todouble(3.50),\r\n        size == 'S3', todouble(7),\r\n\r\n        size == 'P1v2', todouble(3.50),\r\n        size == 'P2v2', todouble(7),\r\n        size == 'P3v2', todouble(14),\r\n        todouble(0)\r\n    )\r\n| extend sizeVcpus = \r\n    case(\r\n        size == 'F1', 1,\r\n        size == 'Y1', 1,\r\n\r\n        size == 'B1', 1,\r\n        size == 'B2', 2,\r\n        size == 'B3', 4,\r\n\r\n        size == 'S1', 1,\r\n        size == 'S2', 2,\r\n        size == 'S3', 4,\r\n\r\n        size == 'P1v2', 1,\r\n        size == 'P2v2', 2,\r\n        size == 'P3v2', 4,\r\n        0\r\n    )\r\n\r\n| extend remainingAppSlots = maxAppRecommendation - appCount, usedRecommendedApps = min_of(maxAppRecommendation, appCount)\r\n| extend remainingRecommendedApps = max_of(0, remainingAppSlots), overRecommendedApps = -min_of(remainingAppSlots, 0)\r\n| project\r\n    aspId = aspJoinId,\r\n    tier,\r\n    size,\r\n    sizeRam,\r\n    sizeVcpus,\r\n    appCount,\r\n    runningCount,\r\n    usedRecommendedApps,\r\n    remainingRecommendedApps,\r\n    overRecommendedApps,\r\n    app_ids = app_ids,\r\n    app_ids_json_string = tostring(app_ids),\r\n    appsLabel = \r\n        strcat(\r\n            case(remainingRecommendedApps > 0, strcat(tostring(usedRecommendedApps), \" (\", tostring(remainingRecommendedApps), \" zbývá)\"), \"\"),\r\n            case(overRecommendedApps > 0, strcat(tostring(appCount), \" (\", tostring(overRecommendedApps), \" přes)\"), \"\") \r\n        )\r\n| order by appCount",
              "size": 3,
              "title": "Seznam App plánů",
              "showRefreshButton": true,
              "exportedParameters": [
                {
                  "fieldName": "aspId",
                  "parameterName": "AppServicePlan",
                  "parameterType": 5
                },
                {
                  "fieldName": "app_ids",
                  "parameterName": "AppServices",
                  "parameterType": 5
                }
              ],
              "showExportToExcel": true,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subskripce}"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "tier",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "usedRecommendedApps",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "remainingRecommendedApps",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "overRecommendedApps",
                    "formatter": 22,
                    "formatOptions": {
                      "compositeBarSettings": {
                        "labelText": "[\"appsLabel\"]",
                        "columnSettings": [
                          {
                            "columnName": "usedRecommendedApps",
                            "color": "green"
                          },
                          {
                            "columnName": "remainingRecommendedApps",
                            "color": "blue"
                          },
                          {
                            "columnName": "overRecommendedApps",
                            "color": "red"
                          }
                        ],
                        "noRowsScaling": true
                      }
                    }
                  },
                  {
                    "columnMatch": "app_ids",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "app_ids_json_string",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "appsLabel",
                    "formatter": 5
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "aspId",
                    "label": "App Plán"
                  },
                  {
                    "columnId": "size",
                    "label": "SKU"
                  },
                  {
                    "columnId": "sizeRam",
                    "label": "Paměť [GB]"
                  },
                  {
                    "columnId": "sizeVcpus",
                    "label": "Počet vCPU"
                  },
                  {
                    "columnId": "appCount",
                    "label": "Počet aplikací"
                  },
                  {
                    "columnId": "runningCount",
                    "label": "Spuštěné aplikace"
                  },
                  {
                    "columnId": "overRecommendedApps",
                    "label": "Stav"
                  }
                ]
              }
            },
            "showPin": true,
            "name": "WebAppPlans"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Metriky App Plánů",
              "items": [
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookbb23082b-7ed7-4968-a0a2-cea5d10b90d1",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.web/serverfarms",
                    "metricScope": 0,
                    "resourceParameter": "AppServicePlan",
                    "resourceIds": [
                      "{AppServicePlan}"
                    ],
                    "timeContextFromParameter": "CasoveRozmezi",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.web/serverfarms",
                        "metric": "microsoft.web/serverfarms--CpuPercentage",
                        "aggregation": 4,
                        "columnName": "Vytížení CPU"
                      }
                    ],
                    "title": "Vytížení CPU",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "25",
                  "showPin": true,
                  "name": "ASPCPU"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookbb23082b-7ed7-4968-a0a2-cea5d10b90d1",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 2,
                    "resourceType": "microsoft.web/serverfarms",
                    "metricScope": 0,
                    "resourceParameter": "AppServicePlan",
                    "resourceIds": [
                      "{AppServicePlan}"
                    ],
                    "timeContextFromParameter": "CasoveRozmezi",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.web/serverfarms",
                        "metric": "microsoft.web/serverfarms--MemoryPercentage",
                        "aggregation": 4,
                        "columnName": "Vytížení paměti"
                      }
                    ],
                    "title": "Vytížení paměti",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "25",
                  "showPin": true,
                  "name": "ASPRAM"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookbb23082b-7ed7-4968-a0a2-cea5d10b90d1",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 1,
                    "resourceType": "microsoft.web/serverfarms",
                    "metricScope": 0,
                    "resourceParameter": "AppServicePlan",
                    "resourceIds": [
                      "{AppServicePlan}"
                    ],
                    "timeContextFromParameter": "CasoveRozmezi",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.web/serverfarms",
                        "metric": "microsoft.web/serverfarms--BytesReceived",
                        "aggregation": 1
                      }
                    ],
                    "title": "Data In",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "25",
                  "showPin": true,
                  "name": "ASPDataIn"
                },
                {
                  "type": 10,
                  "content": {
                    "chartId": "workbookbb23082b-7ed7-4968-a0a2-cea5d10b90d1",
                    "version": "MetricsItem/2.0",
                    "size": 0,
                    "chartType": 1,
                    "resourceType": "microsoft.web/serverfarms",
                    "metricScope": 0,
                    "resourceParameter": "AppServicePlan",
                    "resourceIds": [
                      "{AppServicePlan}"
                    ],
                    "timeContextFromParameter": "CasoveRozmezi",
                    "timeContext": {
                      "durationMs": 86400000
                    },
                    "metrics": [
                      {
                        "namespace": "microsoft.web/serverfarms",
                        "metric": "microsoft.web/serverfarms--BytesSent",
                        "aggregation": 1,
                        "columnName": ""
                      }
                    ],
                    "title": "Data Out",
                    "gridSettings": {
                      "rowLimit": 10000
                    }
                  },
                  "customWidth": "25",
                  "showPin": true,
                  "name": "ASPDatOut"
                }
              ]
            },
            "name": "AppPlanMetrics"
          },
          {
            "type": 12,
            "content": {
              "version": "NotebookGroup/1.0",
              "groupType": "editable",
              "title": "Metriky Aplikací",
              "items": []
            },
            "name": "WebAppMetrics",
            "styleSettings": {
              "showBorder": true
            }
          },
          {
            "type": 10,
            "content": {
              "chartId": "workbookc27d117d-5f13-4e22-b2be-d96da0239a4d",
              "version": "MetricsItem/2.0",
              "size": 3,
              "chartType": 0,
              "resourceType": "microsoft.web/sites",
              "metricScope": 0,
              "resourceParameter": "AppServices",
              "resourceIds": [
                "{AppServices}"
              ],
              "timeContextFromParameter": "CasoveRozmezi",
              "timeContext": {
                "durationMs": 86400000
              },
              "metrics": [
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--AverageMemoryWorkingSet",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--PrivateBytes",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--HttpResponseTime",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--Requests",
                  "aggregation": 1
                },
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--IoReadBytesPerSecond",
                  "aggregation": 1
                },
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--IoWriteBytesPerSecond",
                  "aggregation": 1
                },
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--AppConnections",
                  "aggregation": 4
                }
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "Subscription",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "Name",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--AverageMemoryWorkingSet",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 2,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--AverageMemoryWorkingSet Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.web/sites--PrivateBytes",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 2,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--PrivateBytes Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.web/sites--HttpResponseTime",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 24,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--HttpResponseTime Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.web/sites--Requests",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 0,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--Requests Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.web/sites--IoReadBytesPerSecond",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 11,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--IoReadBytesPerSecond Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.web/sites--IoWriteBytesPerSecond",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 11,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--IoWriteBytesPerSecond Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.web/sites--AppConnections",
                    "formatter": 8,
                    "formatOptions": {
                      "palette": "coldHot"
                    },
                    "numberFormat": {
                      "unit": 0,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.web/sites--AppConnections Timeline",
                    "formatter": 5
                  }
                ],
                "rowLimit": 10000,
                "sortBy": [
                  {
                    "itemKey": "$gen_heatmap_microsoft.web/sites--AverageMemoryWorkingSet_2",
                    "sortOrder": 2
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "microsoft.web/sites--AverageMemoryWorkingSet",
                    "label": "Average memory working set (Average)"
                  },
                  {
                    "columnId": "microsoft.web/sites--AverageMemoryWorkingSet Timeline",
                    "label": "Average memory working set Timeline"
                  },
                  {
                    "columnId": "microsoft.web/sites--PrivateBytes",
                    "label": "Private Bytes (Average)"
                  },
                  {
                    "columnId": "microsoft.web/sites--PrivateBytes Timeline",
                    "label": "Private Bytes Timeline"
                  },
                  {
                    "columnId": "microsoft.web/sites--HttpResponseTime",
                    "label": "Response Time (Average)"
                  },
                  {
                    "columnId": "microsoft.web/sites--HttpResponseTime Timeline",
                    "label": "Response Time Timeline"
                  },
                  {
                    "columnId": "microsoft.web/sites--Requests",
                    "label": "Requests (Sum)"
                  },
                  {
                    "columnId": "microsoft.web/sites--Requests Timeline",
                    "label": "Requests Timeline"
                  },
                  {
                    "columnId": "microsoft.web/sites--IoReadBytesPerSecond",
                    "label": "IO Read Bytes Per Second (Sum)"
                  },
                  {
                    "columnId": "microsoft.web/sites--IoReadBytesPerSecond Timeline",
                    "label": "IO Read Bytes Per Second Timeline"
                  },
                  {
                    "columnId": "microsoft.web/sites--IoWriteBytesPerSecond",
                    "label": "IO Write Bytes Per Second (Sum)"
                  },
                  {
                    "columnId": "microsoft.web/sites--IoWriteBytesPerSecond Timeline",
                    "label": "IO Write Bytes Per Second Timeline"
                  },
                  {
                    "columnId": "microsoft.web/sites--AppConnections",
                    "label": "Connections (Average)"
                  },
                  {
                    "columnId": "microsoft.web/sites--AppConnections Timeline",
                    "label": "Connections Timeline"
                  }
                ]
              },
              "sortBy": [
                {
                  "itemKey": "$gen_heatmap_microsoft.web/sites--AverageMemoryWorkingSet_2",
                  "sortOrder": 2
                }
              ]
            },
            "customWidth": "75",
            "showPin": true,
            "name": "AppServices"
          },
          {
            "type": 10,
            "content": {
              "chartId": "workbookdfd09bc1-ec1f-4539-bd04-d0bb25143bca",
              "version": "MetricsItem/2.0",
              "size": 0,
              "chartType": 1,
              "resourceType": "microsoft.web/sites",
              "metricScope": 0,
              "resourceParameter": "AppServices",
              "resourceIds": [
                "{AppServices}"
              ],
              "timeContextFromParameter": "CasoveRozmezi",
              "timeContext": {
                "durationMs": 86400000
              },
              "metrics": [
                {
                  "namespace": "microsoft.web/sites",
                  "metric": "microsoft.web/sites--AverageMemoryWorkingSet",
                  "aggregation": 4,
                  "columnName": "Spotřeba RAM"
                }
              ],
              "gridSettings": {
                "rowLimit": 10000
              }
            },
            "customWidth": "25",
            "name": "WebAppRAMUsageMetrika"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "tab",
        "comparison": "isEqualTo",
        "value": "webapps"
      },
      "name": "WebAppsZáložka"
    },
    {
      "type": 12,
      "content": {
        "version": "NotebookGroup/1.0",
        "groupType": "editable",
        "items": [
          {
            "type": 1,
            "content": {
              "json": "# Databáze"
            },
            "name": "text - 0"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type == \"microsoft.sql/servers\"\r\n| extend serverId = tolower(id)\r\n| join (\r\n    resources\r\n    | where type == \"microsoft.sql/servers/databases\" and name != \"master\"\r\n    | extend serverIdJoin = tolower(substring(id, 0, indexof(id, \"/databases/\")))\r\n    | summarize db_ids = make_set(id) by serverIdJoin\r\n) on $left.serverId == $right.serverIdJoin\r\n| extend serverStatus =\r\n    case(\r\n        properties.state == \"Ready\", \"Aktivní\",\r\n        \"Neaktivní\"\r\n    )\r\n| project serverId, serverStatus, db_ids = db_ids\r\n",
              "size": 3,
              "title": "Seznam serverů",
              "showRefreshButton": true,
              "exportedParameters": [
                {
                  "fieldName": "serverId",
                  "parameterName": "SQLServerId",
                  "parameterType": 1
                },
                {
                  "fieldName": "db_ids",
                  "parameterName": "DatabaseIds",
                  "parameterType": 5
                }
              ],
              "showExportToExcel": true,
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subskripce}"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "serverId",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "60%"
                    }
                  },
                  {
                    "columnMatch": "serverStatus",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "40%"
                    }
                  },
                  {
                    "columnMatch": "db_ids",
                    "formatter": 5
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "serverId",
                    "label": "Název serveru"
                  },
                  {
                    "columnId": "serverStatus",
                    "label": "Stav"
                  }
                ]
              }
            },
            "customWidth": "30",
            "showPin": true,
            "name": "SeznamServeruQuery"
          },
          {
            "type": 3,
            "content": {
              "version": "KqlItem/1.0",
              "query": "resources\r\n| where type == \"microsoft.sql/servers/databases\" and name != \"master\"\r\n| extend serverId = tolower(substring(id, 0, indexof(id, \"/databases/\")))\r\n| where serverId == \"{SQLServerId}\"\r\n| extend pricingTier = properties.currentServiceObjectiveName\r\n| project\r\n    id,\r\n    name = sku.name,\r\n    tier = sku.tier,\r\n    capacity = sku.capacity,\r\n    pricingTier,\r\n    tags.Customer,\r\n    tags.ProjectName,\r\n    tags.Environment\r\n    ",
              "size": 3,
              "title": "Seznam databází",
              "queryType": 1,
              "resourceType": "microsoft.resourcegraph/resources",
              "crossComponentResources": [
                "{Subskripce}"
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "id",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "50%"
                    }
                  },
                  {
                    "columnMatch": "name",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "tier",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "capacity",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "pricingTier",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "20%"
                    }
                  },
                  {
                    "columnMatch": "tags_Customer",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "10%"
                    }
                  },
                  {
                    "columnMatch": "tags_ProjectName",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "10%"
                    }
                  },
                  {
                    "columnMatch": "tags_Environment",
                    "formatter": 0,
                    "formatOptions": {
                      "customColumnWidthSetting": "10%"
                    }
                  }
                ],
                "labelSettings": [
                  {
                    "columnId": "id",
                    "label": "Název databáze"
                  },
                  {
                    "columnId": "pricingTier",
                    "label": "SKU"
                  },
                  {
                    "columnId": "tags_Customer",
                    "label": "Zákazník"
                  },
                  {
                    "columnId": "tags_ProjectName",
                    "label": "Projekt"
                  },
                  {
                    "columnId": "tags_Environment",
                    "label": "Prod/ Nonprod"
                  }
                ]
              }
            },
            "customWidth": "70",
            "name": "query - 2"
          },
          {
            "type": 10,
            "content": {
              "chartId": "workbookdac07535-25fa-4767-87df-5e44f6c9a594",
              "version": "MetricsItem/2.0",
              "size": 3,
              "chartType": 0,
              "resourceType": "microsoft.sql/servers/databases",
              "metricScope": 0,
              "resourceParameter": "DatabaseIds",
              "resourceIds": [
                "{DatabaseIds}"
              ],
              "timeContextFromParameter": "CasoveRozmezi",
              "timeContext": {
                "durationMs": 86400000
              },
              "metrics": [
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-cpu_percent",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-storage_percent",
                  "aggregation": 3
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-physical_data_read_percent",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-log_write_percent",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-sessions_percent",
                  "aggregation": 4
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-deadlock",
                  "aggregation": 1
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-connection_failed",
                  "aggregation": 1
                },
                {
                  "namespace": "microsoft.sql/servers/databases",
                  "metric": "microsoft.sql/servers/databases-Basic-connection_successful",
                  "aggregation": 1
                }
              ],
              "gridSettings": {
                "formatters": [
                  {
                    "columnMatch": "Subscription",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "Name",
                    "formatter": 13,
                    "formatOptions": {
                      "linkTarget": "Resource",
                      "showIcon": true
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-cpu_percent",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-cpu_percent Timeline",
                    "formatter": 9,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "greenRed"
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-storage_percent",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-storage_percent Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-physical_data_read_percent",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-physical_data_read_percent Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-log_write_percent",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-log_write_percent Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-sessions_percent",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "max": 100,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 1,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-sessions_percent Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-deadlock",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 0,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-deadlock Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-connection_failed",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "palette": "greenRed"
                    },
                    "numberFormat": {
                      "unit": 0,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-connection_failed Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-connection_successful",
                    "formatter": 8,
                    "formatOptions": {
                      "min": 0,
                      "palette": "blue"
                    },
                    "numberFormat": {
                      "unit": 0,
                      "options": {
                        "style": "decimal"
                      }
                    }
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-connection_successful Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-dtu_consumption_percent Timeline",
                    "formatter": 5
                  },
                  {
                    "columnMatch": "microsoft.sql/servers/databases-Basic-dtu_consumption_percent",
                    "formatter": 1,
                    "numberFormat": {
                      "unit": 1,
                      "options": null
                    }
                  }
                ],
                "rowLimit": 10000,
                "labelSettings": [
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-cpu_percent",
                    "label": "CPU percentage (Average)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-cpu_percent Timeline",
                    "label": "CPU percentage Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-storage_percent",
                    "label": "Data space used percent (Max)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-storage_percent Timeline",
                    "label": "Data space used percent Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-physical_data_read_percent",
                    "label": "Data IO percentage (Average)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-physical_data_read_percent Timeline",
                    "label": "Data IO percentage Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-log_write_percent",
                    "label": "Log IO percentage (Average)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-log_write_percent Timeline",
                    "label": "Log IO percentage Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-sessions_percent",
                    "label": "Sessions percentage (Average)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-sessions_percent Timeline",
                    "label": "Sessions percentage Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-deadlock",
                    "label": "Deadlocks (Sum)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-deadlock Timeline",
                    "label": "Deadlocks Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-connection_failed",
                    "label": "Failed Connections : System Errors (Sum)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-connection_failed Timeline",
                    "label": "Failed Connections : System Errors Timeline"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-connection_successful",
                    "label": "Successful Connections (Sum)"
                  },
                  {
                    "columnId": "microsoft.sql/servers/databases-Basic-connection_successful Timeline",
                    "label": "Successful Connections Timeline"
                  }
                ]
              }
            },
            "name": "metric - 3"
          }
        ]
      },
      "conditionalVisibility": {
        "parameterName": "tab",
        "comparison": "isEqualTo",
        "value": "databaze"
      },
      "name": "DatabázeZáložka"
    }
  ],
  "fallbackResourceIds": [
    "azure monitor"
  ],
  "$schema": "https://github.com/Microsoft/Application-Insights-Workbooks/blob/master/schema/workbook.json"
}
